<%= simple_form_for(@evaluation) do |f| %>
  <%= f.error_notification %>

  <%= f.input :date, as: :datetime, discard_second: true, wrapper_html: {class: 'evaluation_date'} %>
  <%= f.input :procedure_id %>
  <%= f.input :evaluation_form_id, as: :hidden %>
  <%= f.input :evaluator_id %>
  <%= f.input :resident_id %>

  <%= simple_format(@evaluation.evaluation_form.introduction) %>

  <%= f.fields_for :answers, OpenStruct.new(@evaluation.answers) do |builder| %>
    <% @evaluation.evaluation_form.questions.each_with_index do |question, index| %>
      <% original_question = EvaluationFormQuestion.where(evaluation_form_id: @evaluation.evaluation_form_id, name: question.name).first %>
      <%= render "evaluations/fields/field", question: question, f: builder, original_question: original_question, index: index %>
    <% end %>
  <% end %>

  <div class="form-actions">
    <%= f.button :submit, class: 'btn btn-success' %>
  </div>
<% end %>
